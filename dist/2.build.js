webpackJsonp([2],{574:function(t,a,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=o(577),s=o(591),i=o(2);var r=function(t){o(589)},l=Object(i.a)(e.a,s.a,s.b,!1,r,null,null);a.default=l.exports},577:function(t,a,o){"use strict";var e=o(3);a.a={name:"LookupListing",components:{listing:e.a},data:()=>({dataTable:{customFilters:"",reloadProp:!1,column:["code","name","parent","created_at","Action"],mapColumns:["id","code","name","parent","created_at"],filterable:["code","name","parent","created_at"],sortable:["code","name","parent","created_at"],headings:{code:"Code",name:"Name",parent:"Parent Code",created_at:"Created At",Action:"Action"},columnsClasses:{code:"col-head-width",name:"col-head-width",parent:"col-head-width",created_at:"col-head-width",Action:"col-sm-1"},payLoad:{resource:"lookup",action:"get"},searchProp:"",lookupProp:{}},lookupobj:{search:"",lookupFilter:[]},lookupParamObj:{lookupid:"0",name:"",code:"",parent_id:"",description:""},errors:{name:"",code:"",parentId:"",description:""},lookup:"Add",companies:[],objComapny:"",app_groups:{},group:"",commands:[],parentLookups:{}}),mounted(){this.fetchLookupFilters(),this.fetchCompanies()},methods:{getLookups(t){this.dataTable.customFilters={app_group_id:t}},getGroups(t){var a=this.objComapny;this.app_groups=a.app_groups,$("#app_groups").show()},fetchCompanies(){this.api("post",this.constants.getUrl("backendApiUrl"),{resource:"companies",action:"get",data:{}},this.authHeaders).then(t=>{this.companies=t.data}).catch(t=>{})},lookupSearch(){this.dataTable.searchProp=this.lookupobj.search},lookupAction(t){$(".table_drop:not(#"+t.row.id+")").hide(),$("#"+t.row.id).slideToggle("100")},removeActive(t){$("#"+t).removeClass("active"),this.dataTable.lookupProp={}},editlookup(t){this.errors.code="",this.api("post",this.constants.getUrl("backendApiUrl"),{resource:"lookup/edit",action:"get",id:t.id},this.authHeaders,!0).then(t=>{this.lookupParamObj.parent_id="",this.lookupParamObj.lookupid=t.data.data.id,this.lookupParamObj.name=t.data.data.name,this.lookupParamObj.code=t.data.data.code,this.lookupParamObj.parent_id=t.data.data.parent_id,this.lookupParamObj.description=t.data.data.description,this.lookup="Update",$("#add_lookup").modal("show")}).catch(t=>{console.log("error",t)})},fn_lookupFilter(t,a){this.dataTable.lookupProp=t},fetchLookupFilters(){this.api("post",this.constants.getUrl("backendApiUrl"),{resource:"lookup",method:"filters",action:"get"},this.authHeaders,!0).then(t=>{if("200"==t.data.meta.code){this.lookupobj.lookupFilter=[],this.parentLookups=t.data.data.parentLookups;for(var a=0;a<t.data.data.sideFilters.length;a++)this.lookupobj.lookupFilter.push({columns:t.data.data.sideFilters[a].columnsAlias,children:t.data.data.sideFilters[a].childern})}}).catch(t=>{console.log("error",t)})},codeRegularExpression(){let t=this.lookupParamObj.name;t=t.replace(/ +(?= )/g,""),this.lookupParamObj.name=t;var a=this.lookupParamObj.name;if(0==this.lookupParamObj.lookupid){if(!/^[A-Za-z_ ][A-Za-z\d_ ]*$/.test(a))return this.lookupParamObj.code="",this.errors.name="Please Enter Only Alphanumeric",!1;{this.errors.name="";let t=a.trim().split(" ").join("_");this.lookupParamObj.code=t.toUpperCase()}}},submitLookup(){var t={},a=this.lookupParamObj.name,o=this.lookupParamObj.lookupid,e=(this.lookupParamObj.code,this.lookupParamObj.parent_id),s=this.lookupParamObj.description;""==a&&(this.errors.name="Please Enter Name"),""===e&&(this.errors.parentId="Please select parent"),""==s&&(this.errors.description="Please add Description"),""!=a&&""!==e&&""!=s&&0==o?(t={resource:"lookup",action:"create",data:this.lookupParamObj},this.saveLookup(t)):""!=a&&""!==e&&""!=s&&0!=o&&(t={resource:"lookup",action:"update",id:o,data:this.lookupParamObj},this.saveLookup(t))},saveLookup(t){this.api("post",this.constants.getUrl("backendApiUrl"),t,this.authHeaders,!0).then(t=>{200==t.data.meta.code?(this.$swal({position:"top-end",type:"success",title:"Lookup has been saved",showConfirmButton:!1,timer:1500}),this.fetchLookupFilters(),$("#add_lookup").modal("hide")):"error"==t.data.meta.status&&this.$swal({position:"top-end",type:"error",title:t.data.error,showConfirmButton:!1,timer:1500}),this.dataTable.reloadProp=!this.dataTable.reloadProp}).catch(t=>{console.log("error",t)})},deletLookup(t){this.$swal({title:"Delete this Lookup?",text:"Are you sure? You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Yes, Delete it!"}).then(a=>{a.value&&this.api("post",this.constants.getUrl("backendApiUrl"),{resource:"lookup",action:"delete",id:t},this.authHeaders,!0).then(t=>{200==t.data.meta.code?(this.$swal("Deleted","You successfully deleted this lookup","success"),this.dataTable.reloadProp=!this.dataTable.reloadProp,this.fetchLookupFilters()):this.$swal("Error",t.data.error,"error")}).catch(t=>{console.log("error",t)})})},addlookup(){this.lookupParamObj.name="",this.lookupParamObj.lookupid="0",this.lookupParamObj.code="",this.errors.code="",this.errors.name="",this.lookupParamObj.parent_id="",this.lookupParamObj.description="",this.lookup="Add",$("#add_lookup").modal("show")}},watch:{lookupParamObj:{handler(t){""!=t.name&&(this.errors.name=""),""!=t.code&&(this.errors.code=""),""!=t.description&&(this.errors.description=""),""!=t.parent_id&&(this.errors.parentId="")},deep:!0}}}},589:function(t,a,o){var e=o(590);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,o(1).default)("dfddaaf6",e,!0,{})},590:function(t,a,o){(t.exports=o(0)(!1)).push([t.i,".on_off_div{margin-right:2%}.on_off_div div select{vertical-align:middle;font-size:80%!important;padding-right:30px!important}.table_holder table th:last-child{font-size:15px!important}.col-head-width{width:60px!important}.inner_tags{padding:10px 0 2px!important}.on_off_div strong{vertical-align:unset!important}.table_drop{right:0!important;top:90%!important}",""])},591:function(t,a,o){"use strict";o.d(a,"a",function(){return e}),o.d(a,"b",function(){return s});var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"page_content_holder"},[o("div",{staticClass:"padding_content"},[o("div",{staticClass:"white_boxed_content lists_page"},[o("header",{staticClass:"sec_header"},[t._m(0),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.lookupobj.search,expression:"lookupobj.search"}],attrs:{id:"table_search",name:"table_search",placeholder:"Search",type:"search"},domProps:{value:t.lookupobj.search},on:{change:t.lookupSearch,input:function(a){a.target.composing||t.$set(t.lookupobj,"search",a.target.value)}}}),t._v(" "),o("div",{staticClass:"align_right"},[t._m(1),t._v(" "),o("ul",{staticClass:"actions_drop list_none"},[o("li",[o("a",{on:{click:t.addlookup}},[t._v("Add Lookup")])])])])]),t._v(" "),o("div",{staticClass:"modal fade",attrs:{id:"add_lookup",role:"dialog"}},[o("div",{staticClass:"modal-dialog"},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[o("button",{staticClass:"close",attrs:{"data-dismiss":"modal",type:"button"}},[t._v("Ã—")]),t._v(" "),o("h4",{staticClass:"modal-title"},[t._v(t._s(t.lookup)+" Lookup")])]),t._v(" "),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"modal_row"},[o("div",{staticClass:"modal_col"},[o("h4",{staticClass:"modal-title"},[t._v("Name:")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.lookupParamObj.name,expression:"lookupParamObj.name"}],attrs:{type:"text"},domProps:{value:t.lookupParamObj.name},on:{keyup:t.codeRegularExpression,input:function(a){a.target.composing||t.$set(t.lookupParamObj,"name",a.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.lookupParamObj.id,expression:"lookupParamObj.id"}],attrs:{id:"lookupid",type:"hidden"},domProps:{value:t.lookupParamObj.id},on:{input:function(a){a.target.composing||t.$set(t.lookupParamObj,"id",a.target.value)}}}),t._v(" "),t.errors.name?o("p",{staticClass:"error"},[t._v(t._s(t.errors.name))]):t._e()]),t._v(" "),o("div",{staticClass:"modal_col"},[o("h4",{staticClass:"modal-title"},[t._v("Code:")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.lookupParamObj.code,expression:"lookupParamObj.code"}],attrs:{disabled:"",type:"text"},domProps:{value:t.lookupParamObj.code},on:{input:function(a){a.target.composing||t.$set(t.lookupParamObj,"code",a.target.value)}}}),t._v(" "),t.errors.code?o("p",{staticClass:"error"},[t._v(t._s(t.errors.code))]):t._e()])]),t._v(" "),o("div",{staticClass:"modal_row"},[o("div",{staticClass:"modal_col"},[o("h4",{staticClass:"modal-title"},[t._v("Parent")]),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.lookupParamObj.parent_id,expression:"lookupParamObj.parent_id"}],on:{change:function(a){var o=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.lookupParamObj,"parent_id",a.target.multiple?o:o[0])}}},[o("option",{attrs:{value:""}},[t._v("Please select a parent")]),t._v(" "),o("option",{attrs:{value:"0"}},[t._v("======= Make Parent =======")]),t._v(" "),t._l(t.parentLookups,function(a){return o("option",{domProps:{value:a.id}},[t._v("\n                                            "+t._s(a.name)+"\n                                        ")])})],2),t._v(" "),t.errors.parentId?o("p",{staticClass:"error"},[t._v(t._s(t.errors.parentId))]):t._e()]),t._v(" "),o("div",{staticClass:"modal_col"},[o("h4",{staticClass:"modal-title"},[t._v("Description:")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.lookupParamObj.description,expression:"lookupParamObj.description"}],domProps:{value:t.lookupParamObj.description},on:{input:function(a){a.target.composing||t.$set(t.lookupParamObj,"description",a.target.value)}}}),t._v(" "),t.errors.description?o("p",{staticClass:"error"},[t._v(t._s(t.errors.description))]):t._e(),t._v(" "),o("input",{staticClass:"right_btn",staticStyle:{"margin-top":"10px"},attrs:{type:"submit"},domProps:{value:t.lookup},on:{click:t.submitLookup}})])])])])])]),t._v(" "),o("div",{staticClass:"list_holder"},[o("div",{staticClass:"align_left mCustomScrollbar _mCS_1 mCS_no_scrollbar"},[o("div",{staticClass:"side_widget"},[t._l(t.lookupobj.lookupFilter,function(a){return o("div",{staticStyle:{display:"none"}},[o("strong",{staticClass:"title colored"},[t._v(t._s(a.columns)+":")]),t._v(" "),o("ul",{staticClass:"list_none side_tags"},t._l(a.children,function(a,e){return o("li",[o("a",{staticClass:"sideBar-filter",staticStyle:{cursor:"pointer"},attrs:{id:e},on:{click:function(o){return t.fn_lookupFilter(a,e)}}},[t._v(t._s(a.parentAlias)+"\n                                        "),o("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"},on:{click:function(a){return a.stopPropagation(),t.removeActive(e)}}})])])}),0)])}),t._v(" "),o("div",[o("strong",{staticClass:"title colored"},[t._v("Filter:")]),t._v(" "),t._l(t.lookupobj.lookupFilter,function(a){return o("ul",{staticClass:"list_none side_tags"},[o("li",[t._m(2,!0),t._v(" "),o("ul",{staticClass:"list_none side_tags inner_tags indicators"},t._l(a.children,function(a,e){return o("li",{class:JSON.stringify(t.dataTable.lookupProp)==JSON.stringify(a)?"active":"",staticStyle:{width:"100%"}},[o("a",{staticClass:"anchor_pointer sideBar-filter",attrs:{id:e},on:{click:function(o){return t.fn_lookupFilter(a,e)}}},[t._v(t._s(a.parentAlias)+"\n                                                "),JSON.stringify(a)==JSON.stringify(t.dataTable.lookupProp)?o("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"},on:{click:function(a){return a.stopPropagation(),t.removeActive(e)}}}):t._e()])])}),0)])])})],2)],2)]),t._v(" "),o("div",{staticClass:"table_holder mCustomScrollbar"},[o("div",{staticClass:"dataTables_wrapper no-footer",attrs:{id:"example_wrapper"}},[o("listing",{attrs:{apiPayLoad:t.dataTable.payLoad,tableColumn:t.dataTable.column,tableColumnsClasses:t.dataTable.columnsClasses,tableFilterable:t.dataTable.filterable,tableHeadings:t.dataTable.headings,tableMapColumns:t.dataTable.mapColumns,tableReloading:t.dataTable.reloadProp,tableSearch:t.dataTable.searchProp,tableSideBarSearch:t.dataTable.lookupProp,tableSortable:t.dataTable.sortable,dropDownFilterProp:t.dataTable.customFilters},scopedSlots:t._u([{key:"listing",fn:function(a){return[o("i",{staticClass:"fas fa-cog",on:{click:function(o){return t.lookupAction(a.actionlisting)}}}),t._v(" "),o("i",{staticClass:"fas fa-sort-down",on:{click:function(o){return o.stopPropagation(),t.lookupAction(a.actionlisting)}}}),t._v(" "),o("ul",{staticClass:"table_drop list_none",attrs:{id:a.actionlisting.row.id}},[o("li",[o("a",{on:{click:function(o){return t.editlookup(a.actionlisting.row)}}},[o("i",{staticClass:"fas fa-edit"}),t._v(" Edit\n                                        ")])]),t._v(" "),o("li",[o("a",{on:{click:function(o){return t.deletLookup(a.actionlisting.row.id)}}},[o("i",{staticClass:"fas fa-trash"}),t._v(" Delete ")])])])]}}])})],1)])])])])])},s=[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"align_left"},[a("strong",[this._v("Lookups")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("strong",{staticClass:"actions_droper"},[this._v("Actions "),a("i",{staticClass:"fas fa-sort-down"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"opener anchor_pointer",attrs:{href:"#"}},[this._v("Select Filter "),a("i",{staticClass:"fas fa-sort-down"})])}]}});